var CaptionContainer;(function(n){function ui(){w||(w=!0,p(_w,ni,fi,!0))}function fi(){u=[];w=!1}function ei(n){return u[n]?u[n].clientHeight:0}var k="vrhcpt",ht="vrhtt",ct="vrhdl",lt="vrhmeta",at="vrhmdvc",d="vrhmddu",g="vrhmdpd",nt="vrhmdr",vt="vrhsrc",tt="vrhsi",yt="vrhsn",pt="vrhcprac",wt="crt",bt="rv",kt="ra_crt_icon",dt="ra_crt_name",gt="vrhcadl",a="vrhspu",ni="unload",it="captionContainer",ti="data-actionkey",s="undefined",t=typeof pMMUtils!=s?pMMUtils:null,v=typeof SmartEvent!=s?SmartEvent:null,h=typeof VideoRichHoverUtils!=s?VideoRichHoverUtils:null,r=typeof VRHConsts!=s?VRHConsts:null,c=!1,i=null,rt=null,ii=null,ut=null,f=null,e=null,ft=null,y=null,o=null,et=null,l=null,ot=null,st=null,p=null,u=[],w=!1,b;if(!c&&t&&t.gfbc&&t.sepd&&t.ga&&t.sa&&t.aup&&t.qsv&&t.ss&&h&&h.showElementFromList&&h.showElement&&v&&r&&v.bind&&(i=t.gfbc,rt=t.sepd,ii=t.gebc,f=t.ga,e=t.sa,ut=t.gsh,o=t.ac,et=t.sh,l=t.aup,ot=t.qsv,st=t.ss,ft=h.showElementFromList,y=VideoRichHoverUtils.showElement,p=v.bind,c=!0),c&&_w&&!_w[it]){_w[it]=n;function ri(n,t,i,r,f,e,o,s,h){c&&n&&n.length>1&&i>0&&(u[n]&&(u[n]=null),u[n]=f?new b(t,i,r,f,e,o,s,h):new b(t,i,r,null,e,o,s,h));return}ui();n.init=ri}n.clientHeight=ei;b=function(){function n(n,u,s,h,c,v,w,b){var it=this,ni,gt,ii;(this.clientHeight=0,this.bindEventForMask=function(){sj_evt.bind(r.CaptionHideEvt,it.onHide);sj_evt.bind(r.CaptionShowEvt,it.onShow)},this.bindEvent=function(){sj_evt.bind(r.HoverCaptionHUpdateEvt,it.onResizeHeight);sj_evt.bind(r.HoverCancelEvt,it.unBindEvent)},this.unBindEvent=function(){sj_evt.unbind(r.HoverCaptionHUpdateEvt,it.onResizeHeight)},this.onResizeHeight=function(n){if(n&&!(n.length>2)&&!isNaN(n[1])){var t=parseInt(n[1]);et(it.captionContainer,t)}},this.onMouseMove=function(){for(var t,n=(t=it.eventHandlerMap)===null||t===void 0?void 0:t[VRHEnums.TriggerEvent.CaptionMouseMove],i=0;i<(n===null||n===void 0?void 0:n.length);i++)switch(n[i]){case VRHEnums.EventHandler.ReplayPlayer:sj_evt.fire(VRHConsts.PlayerReplayEvt,it.instMetaData,it.playerName)}},this.onShow=function(){y(it.captionContainer,!0)},this.onHide=function(){y(it.captionContainer,!1)},this.setTextElement=function(n,t,r,u){if(!n||!u)return!1;var f=i(t,n);return r&&f?(f.textContent=r,u.push(f),!0):!1},this.setSource=function(n,t,u,f,e,s){var h=i(vt,n),v,c,l,y;h&&(v=i(tt,h),c=!1,t&&t.length>0&&(v.className=tt+" "+t,s.push(v),c=!0),c=it.setTextElement(h,yt,u,s)||c,l=it.setTextElement(h,a,f,s),l&&e&&e.length>0&&(y=i(a,h),o(y,"chlf"),p(y,"click",it.onChannelClick),sj_evt.fire(r.HoverChannelFilterEvt,it.instMetaData,it.publish,it.publishId,"cov")),(c||l)&&s.push(h),it.setDelimiter(n,a,c&&l))},this.setMetaData=function(n,t,r,u,f,e){var s=i(lt,n);if(s){var a=it.setTextElement(s,at,r,e),h=it.setTextElement(s,d,u,e),c=it.setTextElement(s,g,t,e),l=it.setTextElement(s,nt,f,e),o=a;it.setDelimiter(n,d,o&&h);o=o||h;it.setDelimiter(n,g,o&&c);o=o||c;it.setDelimiter(n,nt,o&&l);o=o||l;o&&e.push(s)}},this.setRedirectEntryPoints=function(n,t,r){var u,s,p,h,a,y;if(t==null)return!1;if(u=new Array(0),s=i(pt,n),s){p=it.setTextElement(s,dt,t.creatorName,u);p&&(h=i(wt,s),a=f(h,"data-relink"),a&&t.creatorId?(a=l(a,"crtid",t.creatorId),e(h,"data-relink",a),e(h,"title",h.textContent),y=i(kt,s),y&&t.creatorAvatar&&(st(y,"background-image","url("+t.creatorAvatar+")"),o(y,"srcavt")),u.push(h)):u.pop());var v=i(bt,s),c=f(v,"data-relink"),w=ot("q");c&&w&&t.mid&&(c=l(c,"q",w),c=l(c,"mid",t.mid),e(v,"data-relink",c),e(v,"title",v.textContent),u.push(v))}return u.length>0?(u.push(s),u.forEach(function(n){return r.push(n)}),!0):!1},this.onChannelClick=function(n){it.filterUrlFormat&&it.publishId&&it.publish&&(n==null||n.button!=2)&&(_w.location.href=StringHelper.format(it.filterUrlFormat,[it.publish,it.publishId]),sj_evt.fire(r.HoverChannelFilterEvt,it.instMetaData,it.publish,it.publishId,"click"),rt(n))},this.setActionBehavior=function(n,t){var r=i("sa_wrapper",it.captionContainer);if(r){var u=it.actkeylst,e=u?u.split(";"):[],o=f(r,ti);it.setEachAction(r,e.indexOf(o)>=0,n);sj_evt.fire("StatefulAction.AttachEventPayLoad",r,t)}},this.setEachAction=function(n,i,r){if(n){var u=n.parentNode;u&&t.hc(u,k)&&(i?(t.sd(n,"inline-block"),r.push(n),it.saved&&sj_evt.fire("StatefulAction.SwitchState",n)):t.sd(n,"none"))}},this.captionContainer=i(k,n),this.captionContainer)&&h&&(this.filterUrlFormat=h.filterUrlFormat,this.publish=h.pu,this.publishId=h.puid,this.instMetaData=c,this.actkeylst=h.actkeylst,this.actpayload=h.actpayload,this.saved=h.saved,this.playerName=b,this.eventHandlerMap=w,ni=parseInt(f(this.captionContainer,"asMask"))===1,gt=new Array(0),this.setTextElement(this.captionContainer,ht,h.t,gt),this.setTextElement(this.captionContainer,ct,h.de,gt),t.sw(this.captionContainer,u),this.setMetaData(this.captionContainer,h.pud,h.vc,h.du,h.r,gt),this.setSource(this.captionContainer,h.sk,h.s,h.pu,h.puid,gt),this.setActionBehavior(gt,v),ii=this.setRedirectEntryPoints(this.captionContainer,h,gt),ii===!0&&o(v,"hidemeta"),gt.length>0&&(t.ac(n," fullsize"),gt.push(this.captionContainer)),ni&&this.bindEventForMask(),this.bindEvent(),sj_be(this.captionContainer,"mousemove",this.onMouseMove),sj_evt.fire(VRHConsts.HoverCaptionLoadEvt,c),ft(gt,s),this.clientHeight=ni===!0?0:ut(this.captionContainer),sj_evt.fire("VideoRedirectAction.Init",this.captionContainer))}return n.prototype.setDelimiter=function(n,t,r){if(r){var u=i(t,n);u&&o(u,gt)}},n}()})(CaptionContainer||(CaptionContainer={}))